/*!
 * eAudio.js v1.0.0
 * (c) 2019 DIDAVA Media
 * Released under the MIT License.
 * https://www.didava.ir
 * https://github.com/DIDAVA/eAudio
 */
const AudioContext=window.AudioContext||window.webkitAudioContext;class eAudio extends Audio{constructor(e){if(["function"==typeof Audio,"function"==typeof AudioContext,"function"==typeof GainNode,"function"==typeof DynamicsCompressorNode,"function"==typeof BiquadFilterNode].includes(!1))throw new Error("Incompatible Browser");super();const t=new AudioContext,o=t.createMediaElementSource(this),n=t.createGain();let i=[o,n];const s=[31,63,125,250,500,1e3,2e3,4e3,8e3,16e3];s.forEach((e,o)=>{const n=t.createBiquadFilter();0==o?n.type="lowshelf":o==s.length-1?n.type="highshelf":n.type="peaking",n.frequency.value=e;const r=`q${e}`;Object.defineProperty(this,r,{enumerable:!0,get:()=>n.gain.value,set(e){e>6?e=6:e<-24&&(e=-24),n.gain.value=e}}),i.push(n)});const r=t.createAnalyser();r.maxDecibels=-9,r.minDecibels=-96,r.fftSize=128,r.smoothingTimeConstant=.75;let u=new Uint8Array(r.frequencyBinCount);i.push(r,t.destination),i.forEach((e,t)=>{0!=t&&i[t-1].connect(e)}),Object.defineProperties(eAudio.prototype,{playToggle:{enumerable:!0,get:()=>!audio.paused,set(e){"boolean"==typeof e&&(audio.paused?audio.play():audio.pause())}},specLines:{enumerable:!0,get:()=>r.fftSize,set(e){[16,32,64,128,256,512,1024].includes(e)&&(r.fftSize=2*e,u=new Uint8Array(r.frequencyBinCount))}},specSmooth:{enumerable:!0,get:()=>r.smoothingTimeConstant,set(e){"number"==typeof e&&e>=0&&e<=1&&(r.smoothingTimeConstant=e)}},specFreq:{enumerable:!0,get:()=>(r.getByteFrequencyData(u),u)},specDomain:{enumerable:!0,get:()=>(r.getByteTimeDomainData(u),u)},formattedTime:{enumerable:!0,get(){const e=(e,t)=>("000"+e).slice(-1*t),t=this.currentTime,o=Math.floor(t/3600),n=Math.floor(t/60)%60,i=Math.floor(t-60*n);return`${e(o,2)}:${e(n,2)}:${e(i,2)}`}},preset:{enumerable:!0,get(){return JSON.stringify({s:this.currentSrc,v:this.volume,0:this.q31,1:this.q63,2:this.q125,3:this.q250,4:this.q500,5:this.q1000,6:this.q2000,7:this.q4000,8:this.q8000,9:this.q16000})},set(e){const t=JSON.parse(e);"object"==typeof t&&("string"==typeof t.s&&(this.src=t.s),"number"==typeof t.v&&(this.volume=t.v),"number"==typeof t[0]&&(this.q31=t[0]),"number"==typeof t[1]&&(this.q63=t[1]),"number"==typeof t[2]&&(this.q125=t[2]),"number"==typeof t[3]&&(this.q250=t[3]),"number"==typeof t[4]&&(this.q500=t[4]),"number"==typeof t[5]&&(this.q1000=t[5]),"number"==typeof t[6]&&(this.q2000=t[6]),"number"==typeof t[7]&&(this.q4000=t[7]),"number"==typeof t[8]&&(this.q8000=t[8]),"number"==typeof t[9]&&(this.q16000=t[9]))}}}),eAudio.prototype.fadein=function(e=3){n.gain.linearRampToValueAtTime(1,t.currentTime+e)},eAudio.prototype.fadeout=function(e=3){n.gain.linearRampToValueAtTime(1e-6,t.currentTime+e)},e&&(this.src=e)}}